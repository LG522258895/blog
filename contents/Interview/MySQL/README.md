# MySQL面试专题

## 索引
### 什么是索引吗？
索引其实是一种数据结构，能够帮助我们快速的检索数据库中的数据

### 索引具体采用的哪种数据结构呢？ 
常见的MySQL主要有两种结构：Hash索引和B+ Tree索引，我们使用的是InnoDB引擎，默认的是B+树

### B+ Tree索引和Hash索引区别？
区别如下：
* 哈希索引适合等值查询，但是无法进行范围查询 
* 哈希索引没办法利用索引完成排序 
* 哈希索引不支持多列联合索引的最左匹配规则 
* 如果有大量重复键值的情况下，哈希索引的效率会很低，因为存在哈希碰撞问题

### 聚簇索引、非聚簇索引
聚簇索引（有的地方叫 聚集索引）叶子节点存的是整行数据，直接通过这个聚集索引的键值找到某行；数据的物理存放顺序与索引顺序是一致的，即：只要索引是相邻的，那么对应的数据一定也是相邻地存放在磁盘上的。

聚集索引，数据行和相邻的键值紧凑地存储在一起，因为无法同时把数据行存放在两个不同的地方，所以**一个表只能有一个聚集索引**。

非聚集索引，叶子节点存的是字段的值，通过这个非聚集索引的键值找到对应的聚集索引字段的值，再通过聚集索引键值找到表的某行，类似oracle通过键值找到rowid，再通过rowid找到行

MySQL使用innodb引擎的表，其聚集索引相当于整张表，而整张表也是聚集索引。默认通过主键聚集数据，如果没有定义主键，则选择第一个非空的唯一索引，如果没有非空唯一索引，则选择rowid来作为聚集索引。

### 聚簇索引和非聚簇索引的区别？
在 InnoDB 里，索引B+ Tree的叶子节点存储了整行数据的是主键索引，也被称之为聚簇索引；而索引B+ Tree的叶子节点存储了主键的值的是非主键索引，也被称之为非聚簇索引。

聚簇索引查询会更快，因为主键索引树的叶子节点直接就是我们要查询的整行数据了。而非主键索引的叶子节点是主键的值，查到主键的值以后，还需要再通过主键的值再进行一次查询。

Q：刚刚你提到主键索引查询只会查一次，而非主键索引需要回表查询多次。（后来我才知道，原来这个过程叫做回表）是所有情况都是这样的吗？非主键索引一定会查询多次吗？

A：（额、这个问题我回答的不好，后来我自己查资料才知道，通过覆盖索引也可以只查询一次）

### 覆盖索引？
覆盖索引（covering index）指一个查询语句的执行只用从索引中就能够取得，不必从数据表中读取。也可以称之为实现了索引覆盖。

当一条查询语句符合覆盖索引条件时，MySQL只需要通过索引就可以返回查询所需要的数据，这样避免了查到索引后再返回表操作，减少I/O提高效率。

如，表t_sample中有一个普通索引 idx_key1_key2(key1,key2)，当我们通过SQL语句：select key2 from t_sample where key1 = 'keytest'的时候，就可以通过覆盖索引查询，无需回表。

### 联合索引、最左前缀匹配


### 事务隔离级


