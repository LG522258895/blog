# 微服务面试专题

## 单体式应用的不足
开发、部署、扩展困难；

## 对微服务有何了解?
微服务（Microservices），又称微服务架构（MSA），是一种架构风格，它将应用程序构建为以业务领域为模型的小型自治服务集合 。

## 微服务架构有哪些优势?
* 独立开发 – 这种架构使得每个服务都可以有专门开发团队来开发。开发者可以自由选择开发技术，提供API服务。
* 独立部署 – 微服务架构模式是每个微服务独立的部署。开发者不再需要协调其它服务部署对本服务的影响。这种改变可以加快部署速度。
* 独立扩展 – 微服务架构模式使得每个服务独立扩展。你可以根据每个服务的规模来部署满足需求的规模。甚至于，你可以使用更适合于服务资源需求的硬件。
* 混合技术堆栈 – 可以使用不同的语言和技术来构建同一应用程序的不同服务

## 微服务架构的优缺点是什么？

## 微服务拆分的原则

原则一，做到单一服务内部功能的高内聚和低耦合。也就是说每个服务只完成自己职责之内的任务，对于不是自己职责的功能交给其它服务来完成。说起来你可能觉得理所当然对这一点不屑一顾，但很多人在实际开发中，经常会出现一些问题。

原则二，你需要关注服务拆分的粒度，先粗略拆分再逐渐细化。在服务拆分的初期，你其实很难确定服务究竟要拆分成什么样。
所以我推荐的做法是：拆分初期可以把服务粒度拆的粗一些，后面随着团队对于业务和微服务理解的加深，再考虑把服务粒度细化。

原则三，拆分的过程，要尽量避免影响产品的日常功能迭代。也就是说，要一边做产品功能迭代，一边完成服务化拆分。

我们的拆分只能在现有一体化系统的基础上不断剥离业务独立部署，剥离的顺序你可以参考以下几点：1. 优先剥离比较独立的边界服务（比如短信服务、地理位置服务），从非核心的服务出发减少拆分对现有业务的影响，也给团队一个练习、试错的机会；2. 当两个服务存在依赖关系时优先拆分被依赖的服务。比如内容服务依赖于用户服务获取用户的基本信息，那么如果先把内容服务拆分出来，内容服务就会依赖于一体化架构中的用户模块，这样还是无法保证内容服务的快速部署能力。

原则四，服务接口的定义要具备可扩展性。服务拆分之后，由于服务是以独立进程的方式部署，所以服务之间通信就不再是进程内部的方法调用而是跨进程的网络通信了。在这种通信模型下服务接口的定义要具备可扩展性，否则在服务变更时会造成意想不到的错误。

## 微服务化带来的问题和解决思路
1. 服务接口的调用不再是同一进程内的方法调用而是跨进程的网络调用，这会增加接口响应时间的增加。此时我们就要选择高效的服务调用框架，同时接口调用方需要知道服务部署在哪些机器的哪个端口上，这些信息需要存储在一个分布式一致性的存储中，于是就需要引入服务注册中心。

2. 多个服务之间有着错综复杂的依赖关系。一个服务会依赖多个其它服务也会被多个服务所依赖，那么一旦被依赖的服务的性能出现问题产生大量的慢请求，就会导致依赖服务的工作线程池中的线程被占满，依赖的服务也会出现性能问题。接下来问题就会沿着依赖网逐步向上蔓延，直到整个系统出现故障为止。为了避免发生这种情况，我们需要引入服务治理体系针对出问题的服务**采用熔断、降级、限流、超时控制的方法**，使问题被限制在单一服务中，保护服务网络中的其它服务不受影响。

3. 服务拆分到多个进程后，一条请求的调用链路上涉及多个服务，那么一旦这个请求的响应时间增长或者是出现错误，我们就很难知道是哪一个服务出现的问题。另外，整体系统一旦出现故障，很可能外在的表现是所有服务在同一时间都出现了问题，你在问题定位时很难确认哪一个服务是源头，这就需要引入**分布式追踪工具**，以及更细致的服务端监控报表。

4.分布式事务

## 什么是Spring Cloud？
在微服务中，SpringCloud是一个提供与外部系统集成的系统。它是一个敏捷的框架，可以短平快构建应用程序。与有限数量的数据处理相关联，它在微服务体系结构中起着非常重要的作用。

以下为 Spring Cloud 的核心特性：
1. 版本化/分布式配置。
2. 服务注册和发现。
3. 服务和服务之间的调用。
3. 路由。
4. 断路器和负载平衡。
5. 分布式消息传递。

## springCloud和dubbo 有哪些区别？

## eureka和zookeeper的区别?

